## 9.5. 디스크, RAM과 그 밖의 팁들
<div class="abstract">
<p>이 절에서는 Neo4j 실행시, 디스크와 RAM의 성능 고려 사항에 대한 개요를 제공합니다.
</div> 
성능은 사용중인 지속성 미디어에 따라 크게 달라집니다. 디스크 성능을 개선하면 성능이 향상됩니다.

여러 개의 디스크나 지속성 미디어를 사용하는 경우, 파일과 트랜잭션 로그를 나누어 디스크에 저장하는 것이 좋습니다. 탐색 시간이 짧은(low seek time) 디스크에 파일을 보관하면 읽기 작업시 이상이 생길 수 있습니다. 현재, 일반적인 기계식 드라이브의 평균 탐색 시간은 약 5ms입니다. 페이지 캐시에 할당된 RAM의 크기가 너무 작으면, 쿼리나 트래버스(traversal)가 매우 느려질 수 있습니다. 최신의 좋은 SATA 지원 SSD의 평균 탐색 시간이 100ms 미만이므로, 적어도 일반 5ms보다는 50배 이상 빠르게 실행됩니다. 그러나 여전히 RAM에 액세스하는 것보다 수십배, 또는 수백배 느립니다.

디스크 액세스를 적게하려면 더 많은 RAM이 필요합니다. 표준 기계식 드라이브에서 2-3GB의 RAM을 사용하여 수천만 개의 프리미티브(노드, 관계, 속성) 그래프를 처리 할 수 있습니다. 8-16 GB의 RAM을 가진 서버는 수억 개의 프리미티브 그래프를 처리 할 수 있으며, 16-64 GB의 서버는 수십억 개의 프리미티브를 처리 할 수 있습니다. 그러나 더 성능 좋은 SSD에 투자하면, 더 적은 RAM에서 더 큰 그래프를 처리 할 수 있습니다.

프로그램이 실행 중일 때, 정보를 수집하려면 `dstat` 또는 `vmstat`와 명령을 사용합니다. 스왑이나 페이징 수가 높으면 루씬(Lucene)인덱스가 메모리 설정과 맞지 않는 신호입니다. 이 경우 인덱스 룩업을 수행하는 쿼리의 대기 시간(lateny)이 길어집니다.

Neo4j를 실행하면 페이지 캐시가 비어있고 워밍업이 필요합니다. 특히, 크기가 크다면 워밍업에 시간이 오래 걸릴 수 있습니다. 드라이브에서 많은 블럭이 읽혀지면서, 오랜 대기 시간(wait time)은 드물지 않습니다.

또한 Neo4j는 백그라운드에서 페이지 캐시를 플러시(flush)하므로 정상 상태( steady state)에서 드라이브에 블럭(steady trickle of blocks)을 계속 쓰는것은 일반적입니다. 이 백그라운드 플러시는 짧은 IO 대기(small amount of IO wait)를 생성합니다. IO 대기 시간이 정상 상태(steady-state)에서 높으면 Neo4j가 드라이브의 랜덤 I/O 성능이 병목되었다는 신호일 수 있습니다. Neo4j실행을 위한 최상의 드라이브는, 랜덤 IOPS가 높은 빠른 SSD입니다.
