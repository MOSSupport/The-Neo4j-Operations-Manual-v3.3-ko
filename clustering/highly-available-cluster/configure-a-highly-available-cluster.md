### 4.3.2. 설정 및 구성 `Enterprise Edition`
> 이 장에서는 Neo4j HA 클러스터를 설정하고 구성하는 방법에 대해 설명합니다.

Neo4j는 로드, 내결함성 및 사용 가능한 하드웨어에 대한 다양한 요구 사항을 수용할 수 있도록 클러스터 모드로 구성 할 수 있습니다.

Neo4j 클러스터를 구성하려면 다음 단계를 수행하십시오:
1. 클러스터에 포함될 각 서버에 Neo4j Enterprise Edition을 다운로드하여 설치하십시오.
2. 적용 가능한 경우, arbiter 인스턴스로 구성 할 서버를 결정하십시오.
3. 설계 결정을 수용하기 위해 각 서버에서 Neo4j 구성 파일을 편집하십시오.
4. [단일 인스턴스 설치](/installation.html)에 대한 설치 지시 사항을 따르십시오.
5. 아래 절에서 설명된대로 각 서버의 구성 파일을 수정하십시오. 특정 동작을 수행하기 위해 수정할 수 있는 매개 변수가 많이 있습니다. 하지만 초기 클러스터에 필수적인 것은 `dbms.mode`, `ha.server_id` 및 `ha.initial_hosts`뿐입니다.

#### 4.3.2.1. 중요한 구성 설정
Neo4j 클러스터를 시작할 때 각 Neo4j 인스턴스는 구성된대로 다른 인스턴스에 접속합니다. 인스턴스가 다른 인스턴스와의 연결을 설정할 때, 그 인스턴스는 클러스터의 현재 상태를 판별하고 클러스터에 참여할 수 있는지 확인합니다. 적합하려면 Neo4j 인스턴스가 클러스터의 다른 멤버와 동일한 데이터베이스 저장소를 호스팅하거나(이전 상태일 수는 있지만)데이터베이스 저장소가 없는 새로운 배포가 되어야 합니다.

IP 주소 또는 호스트 이름은 클러스터에 참여하는 시스템에 대해 명시적으로 구성되어야 합니다. 지정된 IP 주소가 없으면 Neo4j는 바인딩을 위한 유효한 인터페이스를 찾으려고 시도할 것입니다. 이것은 권장되지 않습니다.

##### dbms.mode
`dbms.mode`는 데이터베이스의 작동 모드를 구성합니다.<br>
클러스터 모드의 경우 다음과 같이 설정됩니다: `dbms.mode=HA`

##### ha.server_id
`ha.server_id`는 각 인스턴스의 클러스터 식별자입니다. 그것은 양의 정수여야 하며 클러스터의 모든 Neo4j 인스턴스에서 고유해야 합니다.<br>
예를 들면, `ha.server_id=1`.

##### ha.host.coordination
`ha.host.coordination`은 Neo4j 인스턴스가 클러스터 통신을 수신할 곳을 지정하는 주소/포트 설정입니다. 기본 포트는 `5001`입니다.<br>
예를 들어, `ha.host.coordination=192.168.33.22:5001`은 포트 5001에서 클러스터 통신을 수신할 것입니다.

##### ha.initial_hosts
`ha.initial_hosts`는 주소/포트 쌍의 쉼표로 구분 된 목록으로 클러스터의 다른 Neo4j 인스턴스에 도달하는 방법을 지정합니다(`ha.host.coordination` 옵션을 통해 구성된 것 처럼). 이 호스트 이름/포트는 Neo4j 인스턴스가 시작할 때 사용되어 클러스터를 찾아서 결합 할 수 있게 합니다. 클러스터를 콜드(cold) 시작할 때, 예를 들어 아직 클러스터를 사용할 수 없는 경우, ha.initial_hosts에 나열된 모든 구성원이 온라인 상태이고 서로 통신 할 때까지 데이터베이스를 사용할 수 없습니다. 클러스터가 빠르고 깨끗하게 가동되려면 클러스터의 모든 인스턴스가 ha.initial_hosts와 정확히 일치하도록 구성하는 것이 좋습니다.<br>
이 구성 옵션에서는 공백을 사용하지 마십시오.<br>
예를 들어, `ha.initial_hosts=192.168.33.21:5001,192.168.33.22:5001,192.168.33.23:5001`은 호스트 192.168.33.21-23을 포함하는 클러스터를 시작하며 모두 동일한 포트, 5001에서 수신할 것입니다.

##### ha.host.data
`ha.host.data`는 Neo4j 인스턴스가 클러스터 마스터로부터의 트랜잭션을 수신할 곳을 지정하는 주소/포트 설정입니다. 기본 포트는 `6001`입니다.<br>
`ha.host.data`는 `ha.host.coordination`과 다른 포트를 사용해야 합니다.<br>
예를 들어, `ha.host.data=192.168.33.22:6001`은 6001 포트에서 클러스터 마스터의 트랜잭션을 수신합니다.

##### ha.join_timeout
[`ha.join_timeout`](https://neo4j.com/docs/operations-manual/3.3/reference/configuration-settings/#config_ha.join_timeout)은 [`ha.initial_hosts`](https://neo4j.com/docs/operations-manual/3.3/reference/configuration-settings/#config_ha.initial_hosts)의 모든 멤버가 클러스터 형성을 포기하기 전에 시작되어야 하는 시간 제한을 나타냅니다. 기본값은 30초 입니다. 기본값을 사용하면 `ha.initial_hosts`에 정의 된 각 인스턴스는 클러스터가 성공적으로 형성되기 위해 30 초 내에 시작되어야 합니다.

<table><td>
##### 주소 및 포트 형식
`ha.host.coordination` 및 `ha.host.data` 구성 옵션은 `<호스트 이름 또는 IP 주소>:<포트>`로 지정됩니다.
`ha.host.data`의 경우, 주소는 호스트의 네트워크 인터페이스 중 하나에 할당 된 주소여야 합니다.
`ha.host.coordination`의 경우, 주소는 호스트의 네트워크 인터페이스 중 하나에 할당 된 주소이거나, Neo4j가 모든 네트워크 인터페이스에서 수신 대기하도록 하는 `0.0.0.0` 값이어야 합니다.
주소 또는 포트를 생략할 수 있으며, 이 경우 해당 부분의 기본값이 사용됩니다. 호스트 이름 또는 IP 주소가 생략되면 포트 앞에 콜론 (예: `:5001`)이 와야합니다.
포트 범위를 설정하는 구문은 `<호스트 이름 또는 IP 주소>:<첫 번째 포트>[-<두 번째 포트>]`입니다. 이 경우, Neo4j는 각 포트를 순서대로 테스트하고, 사용되지 않는 포트를 먼저 선택합니다. 호스트 이름이 `0.0.0.0`("모든 인터페이스" 주소)으로 지정된 경우 이 사용법은 허용되지 않습니다.
</td></table>

Neo4j 클러스터를 설정하기 위한 실습 안내서는 [Section B.2, "Set up a Highly Available cluster"](https://neo4j.com/docs/operations-manual/3.3/tutorial/highly-available-cluster/)을 참조하십시오.
